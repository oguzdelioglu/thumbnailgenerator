<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thumbnail Studio v1.0.0 (Director's Edition)</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=JetBrains+Mono:wght@500&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Color Palette - Cyberpunk/Pro Studio */
            --bg-main: #050505;
            --bg-gradient: radial-gradient(circle at 50% -20%, #2e1065, #000000 70%);
            
            --glass-panel: rgba(20, 20, 30, 0.75);
            --glass-border: rgba(255, 255, 255, 0.08);
            --glass-highlight: rgba(255, 255, 255, 0.05);
            
            --primary: #8b5cf6; /* Violet */
            --primary-glow: 0 0 25px rgba(139, 92, 246, 0.5);
            --accent: #38bdf8; /* Sky Blue */
            --secondary: #f472b6; /* Pink */
            --danger: #ef4444; /* Red */
            
            --text-bright: #ffffff;
            --text-muted: #94a3b8;
            
            --input-bg: rgba(0, 0, 0, 0.6);
            --chip-bg: rgba(255, 255, 255, 0.05);
            
            --hud-bg: rgba(10, 10, 15, 0.95);
            --hud-border: #eab308; /* Amber */
        }

        body {
            font-family: 'Inter', system-ui, sans-serif;
            background: var(--bg-main);
            background-image: var(--bg-gradient);
            color: var(--text-bright);
            margin: 0;
            padding: 30px 20px;
            display: flex;
            justify-content: center;
            min-height: 100vh;
            box-sizing: border-box;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            background: var(--glass-panel);
            backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 40px;
            box-shadow: 0 50px 100px -20px rgba(0,0,0,0.9);
        }

        /* --- HEADER --- */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--glass-border);
            flex-wrap: wrap;
            gap: 20px;
        }
        
        h1 {
            margin: 0;
            font-size: 1.8rem;
            font-weight: 800;
            letter-spacing: -0.5px;
            background: linear-gradient(135deg, #fff 30%, var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        /* G√úNCELLENEN BADGE STƒ∞Lƒ∞ */
        .v8-badge {
            background: #eab308; /* Amber/Gold solid background */
            color: #000; /* Black text for max contrast */
            font-size: 0.75rem; 
            padding: 4px 12px; 
            border-radius: 4px;
            vertical-align: middle; 
            box-shadow: 0 0 15px rgba(234, 179, 8, 0.6);
            -webkit-text-fill-color: #000; /* Override h1 gradient */
            font-weight: 800;
            letter-spacing: 0.5px;
            border: 1px solid #fff;
        }

        /* Aspect Ratio Switch */
        .ar-switch {
            display: flex; gap: 5px; background: var(--input-bg); padding: 4px; border-radius: 20px; border: 1px solid var(--glass-border);
        }
        .ar-btn {
            padding: 8px 16px; border-radius: 16px; font-size: 0.8rem; font-weight: 600;
            cursor: pointer; color: var(--text-muted); transition: 0.3s;
        }
        .ar-btn.active {
            background: var(--text-bright); color: #000; box-shadow: 0 0 10px rgba(255,255,255,0.3);
        }

        .header-controls {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            background: var(--glass-highlight);
            border: 1px solid var(--glass-border);
            color: var(--text-bright);
            padding: 10px 20px;
            border-radius: 30px;
            cursor: pointer;
            font-weight: 600;
            transition: 0.3s all ease;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .action-btn:hover {
            background: var(--glass-border);
            border-color: var(--text-muted);
        }
        .btn-reset:hover {
            background: rgba(239, 68, 68, 0.2);
            border-color: var(--danger);
            color: #fca5a5;
        }

        /* --- MODE SWITCH --- */
        .mode-wrapper {
            background: var(--input-bg);
            padding: 6px;
            border-radius: 16px;
            display: flex;
            margin-bottom: 15px;
            border: 1px solid var(--glass-border);
        }
        .mode-btn {
            flex: 1;
            text-align: center;
            padding: 14px;
            cursor: pointer;
            border-radius: 12px;
            color: var(--text-muted);
            font-weight: 600;
            transition: 0.3s all cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        .mode-btn.active {
            background: var(--primary);
            color: white;
            box-shadow: var(--primary-glow);
        }
        .mode-btn i { font-size: 1.2rem; }
        
        #mode-desc {
            text-align: center;
            color: var(--accent);
            font-size: 0.9rem;
            margin-bottom: 35px;
            font-weight: 500;
        }

        /* --- MAIN GRID --- */
        .grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 25px;
        }
        @media (max-width: 900px) { .grid { grid-template-columns: 1fr; } }

        .section {
            background: rgba(15, 23, 42, 0.4);
            border: 1px solid var(--glass-border);
            padding: 20px;
            border-radius: 18px;
            transition: 0.3s;
            display: flex; flex-direction: column;
        }
        .section:hover { border-color: rgba(139, 92, 246, 0.3); background: rgba(15, 23, 42, 0.6); }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .section-title {
            color: var(--secondary);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 800;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .count-badge { background: var(--chip-bg); padding: 2px 8px; border-radius: 10px; color: var(--text-muted); font-size: 0.75rem; }

        /* INPUTS WITH ICONS */
        .input-group {
            position: relative;
            margin-bottom: 15px;
        }
        .input-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2rem;
            opacity: 0.7;
        }
        input[type="text"] {
            width: 100%;
            background: var(--input-bg);
            border: 1px solid var(--glass-border);
            padding: 14px 14px 14px 45px; /* Padding for icon */
            color: white;
            border-radius: 12px;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
            font-size: 0.95rem;
            transition: 0.3s all;
        }
        input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 15px rgba(56, 189, 248, 0.2);
            background: rgba(0, 0, 0, 0.8);
        }

        /* --- CHIPS --- */
        .chips-container {
            height: 140px;
            overflow-y: auto;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            padding-right: 5px;
            align-content: flex-start;
        }
        .chips-container::-webkit-scrollbar { width: 6px; }
        .chips-container::-webkit-scrollbar-track { background: transparent; }
        .chips-container::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; border: 2px solid #0f172a; }

        .chip {
            background: var(--chip-bg);
            border: 1px solid transparent;
            color: #cbd5e1;
            padding: 8px 14px;
            border-radius: 30px;
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            user-select: none;
            transition: 0.2s all ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .chip-icon { font-size: 1.1rem; }
        .chip:hover {
            background: var(--glass-highlight);
            color: white;
            border-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        .chip:active { transform: scale(0.95); background: var(--accent); color: black; border-color: var(--accent); }

        /* --- HUD SUMMARY --- */
        .hud-panel {
            background: var(--hud-bg);
            border: 1px solid var(--glass-border);
            border-top: 3px solid var(--hud-border);
            border-radius: 16px;
            padding: 25px;
            margin: 35px 0;
            position: relative;
            overflow: hidden;
        }
        .hud-panel::before {
            content: ''; position: absolute; top:0; left:0; right:0; height: 1px;
            background: linear-gradient(90deg, transparent, var(--hud-border), transparent);
            opacity: 0.5;
        }

        .hud-title {
            font-family: 'JetBrains Mono', monospace;
            color: var(--hud-border);
            font-size: 0.9rem;
            letter-spacing: 1px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .hud-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }
        .hud-item { display: flex; flex-direction: column; }
        .hud-label {
            color: var(--text-muted);
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 5px;
            font-weight: 700;
        }
        .hud-value {
            font-family: 'JetBrains Mono', monospace;
            color: white;
            font-weight: 600;
            font-size: 0.85rem;
            white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
            padding-left: 10px;
            border-left: 2px solid var(--accent);
        }

        /* --- GENERATE BUTTON --- */
        .btn-gen {
            width: 100%;
            padding: 22px;
            background: linear-gradient(135deg, var(--secondary), var(--primary));
            color: white;
            border: none;
            border-radius: 16px;
            font-size: 1.3rem;
            font-weight: 800;
            letter-spacing: 1px;
            cursor: pointer;
            box-shadow: 0 10px 40px rgba(139, 92, 246, 0.4);
            transition: 0.3s all;
            position: relative;
            overflow: hidden;
        }
        .btn-gen:hover {
            transform: translateY(-3px);
            filter: brightness(1.1);
            box-shadow: 0 15px 50px rgba(139, 92, 246, 0.6);
        }

        /* --- OUTPUT --- */
        .output-container { margin-top: 25px; position: relative; }
        textarea {
            width: 100%; height: 140px;
            background: #05070a;
            color: #4ade80;
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            resize: none;
            box-sizing: border-box;
            line-height: 1.6;
        }
        textarea:focus { outline: none; border-color: #22c55e; }
        
        .copy-btn {
            position: absolute; bottom: 20px; right: 20px;
            background: rgba(51, 65, 85, 0.8);
            color: white; border: 1px solid var(--glass-border);
            padding: 10px 20px; border-radius: 10px;
            cursor: pointer; font-weight: 600; transition: 0.2s;
            backdrop-filter: blur(4px);
        }
        .copy-btn:hover { background: var(--primary); border-color: var(--primary); }

        /* --- HISTORY SECTION (NEW) --- */
        .history-container {
            margin-top: 40px;
            border-top: 1px solid var(--glass-border);
            padding-top: 20px;
        }
        .history-header {
            display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;
        }
        .history-title {
            font-size: 1rem; font-weight: 700; color: var(--text-muted); display: flex; align-items: center; gap: 8px;
        }
        .history-list {
            display: flex; flex-direction: column; gap: 10px;
        }
        .history-item {
            background: rgba(255,255,255,0.03);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 15px;
            transition: 0.2s;
        }
        .history-item:hover { background: rgba(255,255,255,0.06); }
        .hist-text {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            color: #94a3b8;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            flex: 1;
        }
        .hist-actions { display: flex; gap: 5px; flex-shrink: 0; }
        .h-btn {
            background: transparent; border: 1px solid var(--glass-border);
            color: var(--text-muted); padding: 5px 10px; border-radius: 6px; cursor: pointer; font-size: 0.8rem;
        }
        .h-btn:hover { background: white; color: black; }
        .h-del:hover { background: var(--danger); color: white; border-color: var(--danger); }

    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>üé• THUMBNAIL STUDIO <span class="v8-badge">v1.0.0 DIRECTOR'S CUT</span></h1>
        
        <div class="ar-switch">
            <div class="ar-btn active" id="ar-169" onclick="setAr('16:9')">16:9 (YOUTUBE)</div>
            <div class="ar-btn" id="ar-916" onclick="setAr('9:16')">9:16 (SHORTS)</div>
        </div>

        <div class="header-controls">
            <button class="action-btn" onclick="toggleLang()">üá∫üá∏ EN / üáπüá∑ TR</button>
            <button class="action-btn btn-reset" onclick="resetAll()">üóëÔ∏è <span id="txt-reset">SIFIRLA</span></button>
        </div>
    </div>

    <div class="mode-wrapper">
        <div class="mode-btn active" id="btn-ref" onclick="setMode('ref')">
            <i>üñºÔ∏è</i> <span id="txt-ref">KENDƒ∞ FOTOƒûRAFIM</span>
        </div>
        <div class="mode-btn" id="btn-rnd" onclick="setMode('rnd')">
            <i>üé≤</i> <span id="txt-rnd">RASTGELE KARAKTER</span>
        </div>
    </div>
    <div id="mode-desc"></div>

    <div class="grid">
        <div class="section">
            <div class="section-header">
                <div class="section-title">üòÄ 1. Y√úZ ƒ∞FADESƒ∞</div>
                <span class="count-badge" id="count-expr">0</span>
            </div>
            <div class="input-group">
                <span class="input-icon">üé≠</span>
                <input type="text" id="inp-expr" oninput="updateHud()">
            </div>
            <div class="chips-container" id="list-expr"></div>
        </div>

        <div class="section">
            <div class="section-header">
                <div class="section-title">üëï 2. KIYAFET</div>
                <span class="count-badge" id="count-outfit">0</span>
            </div>
             <div class="input-group">
                <span class="input-icon">üëî</span>
                <input type="text" id="inp-outfit" oninput="updateHud()">
            </div>
            <div class="chips-container" id="list-outfit"></div>
        </div>

        <div class="section">
            <div class="section-header">
                <div class="section-title">ü§≤ 3. ELDEKƒ∞ NESNE</div>
                <span class="count-badge" id="count-obj">0</span>
            </div>
             <div class="input-group">
                <span class="input-icon">üéí</span>
                <input type="text" id="inp-obj" oninput="updateHud()">
            </div>
            <div class="chips-container" id="list-obj"></div>
        </div>

        <div class="section">
            <div class="section-header">
                <div class="section-title">üèôÔ∏è 4. ARKA PLAN</div>
                <span class="count-badge" id="count-bg">0</span>
            </div>
             <div class="input-group">
                <span class="input-icon">üó∫Ô∏è</span>
                <input type="text" id="inp-bg" oninput="updateHud()">
            </div>
            <div class="chips-container" id="list-bg"></div>
        </div>
        
        <div class="section" style="grid-column: span 2;">
            <div class="section-header">
                <div class="section-title">üÖ∞Ô∏è 5. SOLDAKƒ∞ YAZI</div>
                <span class="count-badge" id="count-txt">0</span>
            </div>
             <div class="input-group">
                <span class="input-icon">üí¨</span>
                <input type="text" id="inp-txt" oninput="updateHud()">
            </div>
            <div class="chips-container" id="list-txt" style="height: 100px;"></div>
        </div>

        <div class="section">
            <div class="section-header">
                <div class="section-title">üí° 6. I≈ûIK & MOD</div>
                <span class="count-badge" id="count-light">0</span>
            </div>
             <div class="input-group">
                <span class="input-icon">‚òÄÔ∏è</span>
                <input type="text" id="inp-light" oninput="updateHud()">
            </div>
            <div class="chips-container" id="list-light" style="height: 120px;"></div>
        </div>

        <div class="section">
            <div class="section-header">
                <div class="section-title">üé• 7. KAMERA A√áISI</div>
                <span class="count-badge" id="count-angle">0</span>
            </div>
             <div class="input-group">
                <span class="input-icon">üìê</span>
                <input type="text" id="inp-angle" oninput="updateHud()">
            </div>
            <div class="chips-container" id="list-angle" style="height: 120px;"></div>
        </div>

        <div class="section" style="grid-column: span 2;">
            <div class="section-header">
                <div class="section-title">‚ú® 8. G√ñRSEL EFEKTLER (FX)</div>
                <span class="count-badge" id="count-fx">0</span>
            </div>
             <div class="input-group">
                <span class="input-icon">‚ö°</span>
                <input type="text" id="inp-fx" oninput="updateHud()">
            </div>
            <div class="chips-container" id="list-fx" style="height: 100px;"></div>
        </div>

    </div>

    <div class="hud-panel">
        <div class="hud-title">‚öôÔ∏è SYSTEM_MONITOR // LIVE_PREVIEW</div>
        <div class="hud-grid">
            <div class="hud-item">
                <span class="hud-label" id="hl-mode">SOURCE</span>
                <span class="hud-value" id="hv-mode" style="color:#eab308">PHOTO_REF</span>
            </div>
            <div class="hud-item">
                <span class="hud-label" id="hl-expr">EXPRESSION</span>
                <span class="hud-value" id="hv-expr">N/A</span>
            </div>
            <div class="hud-item">
                <span class="hud-label" id="hl-outfit">OUTFIT</span>
                <span class="hud-value" id="hv-outfit">N/A</span>
            </div>
            <div class="hud-item">
                <span class="hud-label" id="hl-obj">OBJECT</span>
                <span class="hud-value" id="hv-obj">N/A</span>
            </div>
            <div class="hud-item">
                <span class="hud-label" id="hl-bg">BG</span>
                <span class="hud-value" id="hv-bg">N/A</span>
            </div>
             <div class="hud-item">
                <span class="hud-label" id="hl-light">LIGHT</span>
                <span class="hud-value" id="hv-light">N/A</span>
            </div>
             <div class="hud-item">
                <span class="hud-label" id="hl-txt">TEXT</span>
                <span class="hud-value" id="hv-txt" style="color:#38bdf8">N/A</span>
            </div>
        </div>
    </div>

    <button class="btn-gen" id="btn-gen" onclick="generate()">INITIALIZE PROMPT GENERATION</button>

    <div class="output-container">
        <textarea id="output" readonly></textarea>
        <button class="copy-btn" onclick="copyResult()">
            <i>üìã</i> KOPYALA
        </button>
    </div>

    <div class="history-container">
        <div class="history-header">
            <div class="history-title">üìú <span id="txt-history">GE√áMƒ∞≈û PROMPTLAR</span></div>
            <button class="h-btn" onclick="clearHistory()" id="btn-clear-hist" style="font-size:0.7rem">T√úM√úN√ú Sƒ∞L</button>
        </div>
        <div class="history-list" id="history-list">
            </div>
    </div>

</div>

<script>
    // =========================================
    // *** DATASET v1.0.0 (INITIAL RELEASE) ***
    // =========================================
    const dataPool = {
        tr: {
            modeRefTxt: "KENDƒ∞ FOTOƒûRAFIM (Varsayƒ±lan)",
            modeRndTxt: "RASTGELE KARAKTER",
            modeDescRef: "‚ÑπÔ∏è Prompt'a fotoƒürafƒ±nƒ± eklemelisin. Y√ºz√ºn korunur, ortam deƒüi≈üir.",
            modeDescRnd: "‚ö†Ô∏è Prompt rastgele bir karakter tarifi olu≈üturur.",
            placeholders: ["√ñrn: ≈ûa≈ükƒ±n...", "√ñrn: Siyah Hoodie...", "√ñrn: Para...", "√ñrn: St√ºdyo...", "√ñrn: YAZI", "√ñrn: Sinematik...", "√ñrn: Geni≈ü A√ßƒ±...", "√ñrn: Kƒ±vƒ±lcƒ±m..."],
            hudLabels: ["KAYNAK", "ƒ∞FADE", "KIYAFET", "NESNE", "MEKAN", "YAZI", "I≈ûIK", "A√áI", "EFEKT"],
            btnGen: "PROMPT OLU≈ûTUR (BA≈ûLAT)",
            txtReset: "SIFIRLA",
            txtHistory: "GE√áMƒ∞≈û PROMPTLAR",
            
            expr: [
                {i:"üò±", l:"≈ûok Olmu≈ü"}, {i:"üòä", l:"Mutlu"}, {i:"ü§¨", l:"√áok Sinirli"}, {i:"üò≠", l:"Aƒülayan"}, {i:"ü§î", l:"D√º≈ü√ºnceli"},
                {i:"ü§Ø", l:"Beyni Yanmƒ±≈ü"}, {i:"ü§ë", l:"Para G√∂zl√º"}, {i:"üòà", l:"Sinsi/K√∂t√º"}, {i:"üò¥", l:"Uykulu"}, {i:"üò®", l:"Deh≈üete D√º≈üm√º≈ü"},
                {i:"ü§ê", l:"Aƒüzƒ± Bantlƒ±"}, {i:"ü§°", l:"Palya√ßo"}, {i:"üòé", l:"Havalƒ±"}, {i:"ü§ï", l:"Yaralƒ±"}, {i:"üßê", l:"ƒ∞nceleyen"},
                {i:"ü§¢", l:"ƒ∞ƒürenmi≈ü"}, {i:"ü§£", l:"Kahkaha Atan"}, {i:"üò§", l:"Kararlƒ±"}, {i:"üôÑ", l:"G√∂z Deviren"}, {i:"ü•∫", l:"Masum/Yalvaran"},
                {i:"üòµ", l:"Baygƒ±n"}, {i:"ü§™", l:"√áƒ±lgƒ±n"}, {i:"ü§•", l:"Yalancƒ± (Burnu Uzun)"}, {i:"ü§´", l:"Sus ƒ∞≈üareti"}, {i:"üò¨", l:"Gergin"}
            ],
            outfit: [
                {i:"üß•", l:"Siyah Hoodie"}, {i:"üëî", l:"Takƒ±m Elbise"}, {i:"üîß", l:"ƒ∞≈ü Tulumu"}, {i:"üëï", l:"T-Shirt"}, {i:"üëÆ", l:"Polis"},
                {i:"ü©∫", l:"Doktor"}, {i:"ü™ñ", l:"Askeri"}, {i:"‚õìÔ∏è", l:"Mahkum"}, {i:"üë®‚Äçüç≥", l:"A≈ü√ßƒ±"}, {i:"üï¥Ô∏è", l:"Smokin"}, 
                {i:"üßü", l:"Zombi"}, {i:"ü¶∏", l:"S√ºper Kahraman"}, {i:"üèãÔ∏è", l:"Sporcu/Atlet"}, {i:"ü•ã", l:"D√∂v√º≈ü√ß√º"}, {i:"üß™", l:"Laboratuvar √ñnl√ºƒü√º"},
                {i:"üß•", l:"Deri Ceket"}, {i:"üöÄ", l:"Astronot"}, {i:"ü§¥", l:"Kraliyet Giysisi"}, {i:"üëò", l:"Cyberpunk Ceket"}, {i:"üèñÔ∏è", l:"Hawaii G√∂mleƒüi"},
                {i:"üëó", l:"Abiye Elbise"}, {i:"üï∂Ô∏è", l:"Ajan (Siyah Takƒ±m)"}, {i:"ü¶Å", l:"K√ºrk Mantolu"}
            ],
            obj: [
                {i:"üì±", l:"Telefon"}, {i:"üíµ", l:"Para Destesi"}, {i:"üíª", l:"Laptop"}, {i:"üéÆ", l:"Oyun Kolu"}, {i:"üö™", l:"Kapƒ± Hidroliƒüi"},
                {i:"‚ùì", l:"Gizemli Kutu"}, {i:"üçî", l:"Hamburger"}, {i:"üé§", l:"Mikrofon"}, {i:"üì∏", l:"Kamera"}, {i:"üöÅ", l:"Drone"},
                {i:"‚Çø", l:"Bitcoin"}, {i:"üèÜ", l:"Kupa"}, {i:"üî´", l:"Oyuncak Silah"}, {i:"üí≥", l:"Kredi Kartƒ±"}, {i:"üï∂Ô∏è", l:"VR G√∂zl√ºk"},
                {i:"üèéÔ∏è", l:"Direksiyon"}, {i:"üíä", l:"Hap/ƒ∞la√ß"}, {i:"üß±", l:"Altƒ±n K√ºl√ße"}, {i:"‚è±Ô∏è", l:"Kronometre"}, {i:"üîç", l:"B√ºy√ºte√ß"},
                {i:"ü•§", l:"Enerji ƒ∞√ßeceƒüi"}, {i:"üéà", l:"Kƒ±rmƒ±zƒ± Balon"}, {i:"üéÅ", l:"Hediye Paketi"}, {i:"üå∂Ô∏è", l:"Acƒ± Biber"}
            ],
            bg: [
                {i:"üéôÔ∏è", l:"Neon St√ºdyo"}, {i:"üè†", l:"Ev Salonu"}, {i:"üç≥", l:"L√ºks Mutfak"}, {i:"üëæ", l:"Oyun Odasƒ±"}, {i:"üñ•Ô∏è", l:"Ofis"},
                {i:"üõ†Ô∏è", l:"At√∂lye"}, {i:"üöî", l:"Hapishane"}, {i:"üå≤", l:"Orman"}, {i:"üèöÔ∏è", l:"Harabe"}, {i:"üåå", l:"Uzay"}, {i:"üèôÔ∏è", l:"≈ûehir"},
                {i:"‚úàÔ∏è", l:"√ñzel Jet"}, {i:"üõí", l:"S√ºpermarket"}, {i:"üèãÔ∏è", l:"Spor Salonu"}, {i:"üéì", l:"Sƒ±nƒ±f/Okul"}, {i:"‚öñÔ∏è", l:"Mahkeme"},
                {i:"üèñÔ∏è", l:"Plaj"}, {i:"üèéÔ∏è", l:"Yarƒ±≈ü Pisti"}, {i:"üåã", l:"Volkanik Alan"}, {i:"üè•", l:"Hastane Odasƒ±"}, {i:"üè¶", l:"Banka Kasasƒ±"},
                {i:"üõÅ", l:"L√ºks Banyo"}, {i:"üèúÔ∏è", l:"√á√∂l"}, {i:"üõ•Ô∏è", l:"Yat G√ºvertesi"}
            ],
            txt: [
                {i:"‚ùì", l:"NASIL?"}, {i:"üîé", l:"ƒ∞NCELEME"}, {i:"üö´", l:"SAKIN YAPMA"}, {i:"üí°", l:"GER√áEKLER"}, {i:"ü§•", l:"YALAN MI?"},
                {i:"‚ö†Ô∏è", l:"DOLANDIRICI"}, {i:"üí∏", l:"ƒ∞FLAS"}, {i:"ü§ë", l:"ZENGƒ∞N OLDUM"}, {i:"‚è≥", l:"24 SAAT"}, {i:"üÜö", l:"KIYASLAMA"},
                {i:"üî•", l:"√áOK Rƒ∞SKLƒ∞"}, {i:"üõë", l:"DUR!"}, {i:"üò±", l:"ƒ∞NANILMAZ"}, {i:"üí∞", l:"100.000$"}, {i:"üÜì", l:"BEDAVA"},
                {i:"üß™", l:"DENEY"}, {i:"üîí", l:"Gƒ∞ZLƒ∞"}, {i:"‚ùå", l:"HATA YAPTIM"}, {i:"üìà", l:"YATIRIM"}, {i:"üèÜ", l:"KAZANDIM"}
            ],
            light: [
                {i:"üü¶", l:"Teal & Orange (Sinematik)"}, {i:"üü£", l:"Neon Cyberpunk (Mor/Mavi)"}, {i:"üåë", l:"Rembrandt (Karanlƒ±k)"}, 
                {i:"üí°", l:"High Key (Parlak/Temiz)"}, {i:"ü§¢", l:"Korku (Ye≈üil/Toksik)"}, {i:"üåÖ", l:"Golden Hour (G√ºne≈üli)"},
                {i:"üî¶", l:"Rim Light (Kenar I≈üƒ±ƒüƒ±)"}, {i:"üå©Ô∏è", l:"Dramatik Fƒ±rtƒ±na"}, {i:"üïØÔ∏è", l:"Mum I≈üƒ±ƒüƒ± (Sƒ±cak)"}, {i:"üåà", l:"RGB Split (Renkli)"},
                {i:"‚ö´", l:"Siyah Beyaz (Noir)"}, {i:"‚ú®", l:"H√ºzme I≈üƒ±klar (God Rays)"}
            ],
            angle: [
                {i:"üòê", l:"G√∂z Hizasƒ± (Normal)"}, {i:"üêü", l:"Geni≈ü A√ßƒ± (GoPro)"}, {i:"ü¶∏", l:"Alttan Bakƒ±≈ü (Kahraman)"}, 
                {i:"üîç", l:"Yakƒ±n √áekim (Duygusal)"}, {i:"üöÅ", l:"√ústten Bakƒ±≈ü (Drone)"}, {i:"ü§≥", l:"Selfie A√ßƒ±sƒ±"},
                {i:"üìê", l:"Dutch Angle (Eƒüik)"}, {i:"üêú", l:"Makro (√áok Yakƒ±n)"}, {i:"üë•", l:"Omuz √úst√º (Over Shoulder)"}
            ],
            fx: [
                {i:"‚ú®", l:"Temiz (Efekt Yok)"}, {i:"üí®", l:"Toz Zerrecikleri"}, {i:"üî•", l:"Ate≈ü Kƒ±vƒ±lcƒ±mlarƒ±"}, {i:"üí∏", l:"Yaƒüan Paralar"}, 
                {i:"üíª", l:"Matrix Kodlarƒ±"}, {i:"‚ö°", l:"Elektrik/Yƒ±ldƒ±rƒ±m"}, {i:"üå´Ô∏è", l:"Duman/Sis"},
                {i:"üíß", l:"Su Sƒ±√ßramasƒ±"}, {i:"üí•", l:"Patlama"}, {i:"üì∑", l:"Bokeh (Arka Plan Bulanƒ±k)"}, {i:"üì∫", l:"Glitch (Bozulma)"},
                {i:"‚ùÑÔ∏è", l:"Kar Tanesi/Buz"}, {i:"üé®", l:"Yaƒülƒ± Boya Dokusu"}, {i:"üï∏Ô∏è", l:"√ñr√ºmcek Aƒülarƒ±"}
            ]
        },
        en: {
            modeRefTxt: "MY PHOTO (Default)",
            modeRndTxt: "RANDOM CHARACTER",
            modeDescRef: "‚ÑπÔ∏è Attach your photo with the prompt. Face is kept, scene changes.",
            modeDescRnd: "‚ö†Ô∏è Prompt generates a random character description.",
            placeholders: ["e.g. Shocked...", "e.g. Hoodie...", "e.g. Money...", "e.g. Studio...", "e.g. TEXT", "e.g. Cinematic...", "e.g. Wide Angle...", "e.g. Fire..."],
            hudLabels: ["SOURCE", "EXPRESSION", "OUTFIT", "OBJECT", "ENVIRONMENT", "OVERLAY", "LIGHT", "ANGLE", "FX"],
            btnGen: "GENERATE PROMPT (INITIALIZE)",
            txtReset: "RESET",
            txtHistory: "PROMPT HISTORY",
            
            expr: [
                {i:"üò±", l:"Shocked"}, {i:"üòä", l:"Happy"}, {i:"ü§¨", l:"Angry"}, {i:"üò≠", l:"Crying"}, {i:"ü§î", l:"Thinking"},
                {i:"ü§Ø", l:"Mind Blown"}, {i:"ü§ë", l:"Greedy"}, {i:"üòà", l:"Evil smirk"}, {i:"üò¥", l:"Sleepy"}, {i:"üò®", l:"Terrified"},
                {i:"ü§ê", l:"Mouth taped shut"}, {i:"ü§°", l:"Clown face"}, {i:"üòé", l:"Cool wearing sunglasses"}, {i:"ü§ï", l:"Injured with bandages"}, {i:"üßê", l:"Focused and analyzing"},
                {i:"ü§¢", l:"Disgusted"}, {i:"ü§£", l:"Laughing hysterically"}, {i:"üò§", l:"Determined"}, {i:"üôÑ", l:"Rolling eyes"}, {i:"ü•∫", l:"Pleading puppy eyes"},
                {i:"üòµ", l:"Unconscious"}, {i:"ü§™", l:"Crazy tongue out"}, {i:"ü§•", l:"Lying with long nose"}, {i:"ü§´", l:"Shushing finger on lips"}, {i:"üò¨", l:"Awkward grimace"}
            ],
            outfit: [
                {i:"üß•", l:"Black Hoodie"}, {i:"üëî", l:"Luxury Suit"}, {i:"üîß", l:"Blue Overalls"}, {i:"üëï", l:"White T-Shirt"}, {i:"üëÆ", l:"Police Uniform"},
                {i:"ü©∫", l:"Doctor Coat"}, {i:"ü™ñ", l:"Military Gear"}, {i:"‚õìÔ∏è", l:"Prisoner Jumpsuit"}, {i:"üë®‚Äçüç≥", l:"Chef Uniform"}, {i:"üï¥Ô∏è", l:"Tuxedo"}, 
                {i:"üßü", l:"Zombie Clothes"}, {i:"ü¶∏", l:"Superhero Costume"}, {i:"üèãÔ∏è", l:"Gym Sportswear"}, {i:"ü•ã", l:"MMA Fighter Gear"}, {i:"üß™", l:"White Lab Coat"},
                {i:"üß•", l:"Leather Biker Jacket"}, {i:"üöÄ", l:"NASA Astronaut Suit"}, {i:"ü§¥", l:"Royal King Robe"}, {i:"üëò", l:"Futuristic Cyberpunk Jacket"}, {i:"üèñÔ∏è", l:"Floral Hawaiian Shirt"},
                {i:"üëó", l:"Elegant Evening Gown"}, {i:"üï∂Ô∏è", l:"Secret Agent Black Suit"}, {i:"ü¶Å", l:"Extravagant Fur Coat"}
            ],
            obj: [
                {i:"üì±", l:"Glowing Phone"}, {i:"üíµ", l:"Stack of Money"}, {i:"üíª", l:"Laptop"}, {i:"üéÆ", l:"Gamepad"}, {i:"üö™", l:"Door Closer"},
                {i:"‚ùì", l:"Mystery Box"}, {i:"üçî", l:"Giant Burger"}, {i:"üé§", l:"Microphone"}, {i:"üì∏", l:"Camera"}, {i:"üöÅ", l:"Drone"},
                {i:"‚Çø", l:"Bitcoin Coin"}, {i:"üèÜ", l:"Golden Trophy"}, {i:"üî´", l:"Toy Nerf Gun"}, {i:"üí≥", l:"Black Credit Card"}, {i:"üï∂Ô∏è", l:"VR Headset"},
                {i:"üèéÔ∏è", l:"Racing Steering Wheel"}, {i:"üíä", l:"Red and Blue Pills"}, {i:"üß±", l:"Gold Bars"}, {i:"‚è±Ô∏è", l:"Stopwatch"}, {i:"üîç", l:"Magnifying Glass"},
                {i:"ü•§", l:"Energy Drink Can"}, {i:"üéà", l:"Red Balloon"}, {i:"üéÅ", l:"Wrapped Gift Box"}, {i:"üå∂Ô∏è", l:"Hot Chili Pepper"}
            ],
            bg: [
                {i:"üéôÔ∏è", l:"Neon Studio"}, {i:"üè†", l:"Living Room"}, {i:"üç≥", l:"Luxury Kitchen"}, {i:"üëæ", l:"Gaming Room"}, {i:"üñ•Ô∏è", l:"Office"},
                {i:"üõ†Ô∏è", l:"Workshop"}, {i:"üöî", l:"Jail Cell"}, {i:"üå≤", l:"Dark Forest"}, {i:"üèöÔ∏è", l:"Abandoned Ruins"}, {i:"üåå", l:"Outer Space"}, {i:"üèôÔ∏è", l:"City Skyline"},
                {i:"‚úàÔ∏è", l:"Private Jet Interior"}, {i:"üõí", l:"Supermarket Aisle"}, {i:"üèãÔ∏è", l:"Gym Background"}, {i:"üéì", l:"University Classroom"}, {i:"‚öñÔ∏è", l:"Courtroom"},
                {i:"üèñÔ∏è", l:"Sunny Beach"}, {i:"üèéÔ∏è", l:"F1 Racetrack"}, {i:"üåã", l:"Volcanic Landscape"}, {i:"üè•", l:"Hospital Room"}, {i:"üè¶", l:"Bank Vault"},
                {i:"üõÅ", l:"Luxury Bathroom"}, {i:"üèúÔ∏è", l:"Sahara Desert"}, {i:"üõ•Ô∏è", l:"Yacht Deck"}
            ],
            txt: [
                {i:"‚ùì", l:"HOW TO?"}, {i:"üîé", l:"REVIEW"}, {i:"üö´", l:"DON'T DO IT"}, {i:"üí°", l:"THE TRUTH"}, {i:"ü§•", l:"FAKE?"},
                {i:"‚ö†Ô∏è", l:"SCAMMER"}, {i:"üí∏", l:"BANKRUPT"}, {i:"ü§ë", l:"I'M RICH"}, {i:"‚è≥", l:"24 HOURS"}, {i:"üÜö", l:"VS"},
                {i:"üî•", l:"HIGH RISK"}, {i:"üõë", l:"STOP!"}, {i:"üò±", l:"UNBELIEVABLE"}, {i:"üí∞", l:"$100,000"}, {i:"üÜì", l:"FOR FREE"},
                {i:"üß™", l:"EXPERIMENT"}, {i:"üîí", l:"SECRET"}, {i:"‚ùå", l:"HUGE MISTAKE"}, {i:"üìà", l:"INVESTING"}, {i:"üèÜ", l:"I WON"}
            ],
            light: [
                {i:"üü¶", l:"dramatic teal and orange cinematic lighting"}, 
                {i:"üü£", l:"vibrant neon cyberpunk pink and blue lighting"}, 
                {i:"üåë", l:"moody dark rembrandt lighting, high contrast"}, 
                {i:"üí°", l:"bright high-key studio lighting, clean white look"}, 
                {i:"ü§¢", l:"eerie green toxic horror lighting"}, 
                {i:"üåÖ", l:"warm golden hour sunset lighting"},
                {i:"üî¶", l:"sharp rim lighting outlining the subject"},
                {i:"üå©Ô∏è", l:"dramatic stormy lightning flashes"},
                {i:"üïØÔ∏è", l:"warm candlelight low light"},
                {i:"üåà", l:"RGB split color lighting effect"},
                {i:"‚ö´", l:"black and white film noir lighting"},
                {i:"‚ú®", l:"volumetric god rays shining through"}
            ],
            angle: [
                {i:"üòê", l:"eye-level shot"}, 
                {i:"üêü", l:"wide-angle fish-eye lens effect"}, 
                {i:"ü¶∏", l:"low-angle hero shot looking up"}, 
                {i:"üîç", l:"extreme close-up shot on face"}, 
                {i:"üöÅ", l:"high-angle drone shot looking down"},
                {i:"ü§≥", l:"selfie style camera angle holding camera"},
                {i:"üìê", l:"tilted dutch angle shot"},
                {i:"üêú", l:"macro photography shot"},
                {i:"üë•", l:"over-the-shoulder cinematic shot"}
            ],
            fx: [
                {i:"‚ú®", l:"clean sharp focus, no particles"}, 
                {i:"üí®", l:"floating cinematic dust particles"}, 
                {i:"üî•", l:"flying fire sparks and embers"}, 
                {i:"üí∏", l:"falling dollar bills raining down"}, 
                {i:"üíª", l:"green digital matrix code rain overlay"}, 
                {i:"‚ö°", l:"blue lightning bolts and electricity"}, 
                {i:"üå´Ô∏è", l:"thick volumetric fog and smoke"},
                {i:"üíß", l:"water splashing droplets frozen in air"},
                {i:"üí•", l:"explosive background debris"},
                {i:"üì∑", l:"bokeh depth of field background blur"},
                {i:"üì∫", l:"digital glitch distortion effect"},
                {i:"‚ùÑÔ∏è", l:"falling snow and ice particles"},
                {i:"üé®", l:"oil painting texture overlay"},
                {i:"üï∏Ô∏è", l:"cobwebs and dusty atmosphere"}
            ]
        }
    };

    // =========================
    // *** APP LOGIC ***
    // =========================
    let currentLang = 'tr';
    let currentMode = 'ref';
    let currentAr = '16:9';
    let promptHistory = [];

    function init() {
        renderUI();
        setMode('ref');
        setAr('16:9');
        loadHistory();
    }

    function renderUI() {
        const d = dataPool[currentLang];
        
        // Static Texts
        document.getElementById('txt-ref').innerText = d.modeRefTxt;
        document.getElementById('txt-rnd').innerText = d.modeRndTxt;
        document.getElementById('btn-gen').innerText = d.btnGen;
        document.getElementById('txt-reset').innerText = d.txtReset;
        document.getElementById('txt-history').innerText = d.txtHistory;
        document.getElementById('btn-clear-hist').innerText = currentLang === 'tr' ? "T√úM√úN√ú Sƒ∞L" : "CLEAR ALL";
        
        // Loop through all categories (including new ones)
        const cats = ['expr', 'outfit', 'obj', 'bg', 'txt', 'light', 'angle', 'fx'];
        
        cats.forEach((cat, i) => {
            const inputEl = document.getElementById(`inp-${cat}`);
            if(inputEl.value === "") {
                inputEl.placeholder = d.placeholders[i];
            }
            // HUD labels logic
            if(document.getElementById(`hl-${cat}`)) {
                document.getElementById(`hl-${cat}`).innerText = d.hudLabels[i+1];
            }

            // Render Chips
            const container = document.getElementById(`list-${cat}`);
            const countSpan = document.getElementById(`count-${cat}`);
            if(!container) return;
            
            container.innerHTML = '';
            
            const listData = dataPool[currentLang][cat];
            const valuesData = dataPool['en'][cat]; 
            
            if(countSpan) countSpan.innerText = listData.length;

            listData.forEach((item, index) => {
                const chip = document.createElement('div');
                chip.className = 'chip';
                
                const iconSpan = document.createElement('span');
                iconSpan.className = 'chip-icon';
                iconSpan.innerText = item.i;
                
                const labelText = document.createTextNode(item.l);
                
                chip.appendChild(iconSpan);
                chip.appendChild(labelText);
                
                // Value to Set: EN description for Prompt, Localized for Text
                let valueToSet = valuesData[index].l;
                if(cat === 'txt') valueToSet = item.l; 

                chip.onclick = () => {
                    const input = document.getElementById(`inp-${cat}`);
                    input.value = valueToSet;
                    
                    // Visual feedback
                    input.style.borderColor = 'var(--accent)';
                    input.style.boxShadow = '0 0 15px rgba(56, 189, 248, 0.4)';
                    setTimeout(() => {
                        input.style.borderColor = 'var(--glass-border)';
                         input.style.boxShadow = 'none';
                    }, 300);
                    updateHud();
                };
                container.appendChild(chip);
            });
        });
    }

    function toggleLang() {
        currentLang = currentLang === 'tr' ? 'en' : 'tr';
        renderUI();
        setMode(currentMode);
        updateHud();
    }

    function setMode(mode) {
        currentMode = mode;
        const d = dataPool[currentLang];
        
        document.getElementById('btn-ref').className = mode === 'ref' ? 'mode-btn active' : 'mode-btn';
        document.getElementById('btn-rnd').className = mode === 'rnd' ? 'mode-btn active' : 'mode-btn';
        document.getElementById('mode-desc').innerText = mode === 'ref' ? d.modeDescRef : d.modeDescRnd;
        updateHud();
    }

    function setAr(ar) {
        currentAr = ar;
        document.getElementById('ar-169').className = ar === '16:9' ? 'ar-btn active' : 'ar-btn';
        document.getElementById('ar-916').className = ar === '9:16' ? 'ar-btn active' : 'ar-btn';
    }

    function resetAll() {
        if(!confirm(currentLang === 'tr' ? 'T√ºm ayarlar sƒ±fƒ±rlansƒ±n mƒ±?' : 'Reset all settings?')) return;
        
        const fields = ['expr', 'outfit', 'obj', 'bg', 'txt', 'light', 'angle', 'fx'];
        fields.forEach(f => {
            const el = document.getElementById(`inp-${f}`);
            if(el) el.value = '';
        });
        document.getElementById('output').value = '';
        setMode('ref');
        updateHud();
    }

    function updateHud() {
        // Mode
        const modeText = currentMode === 'ref' ? (currentLang==='tr'?'FOTO_REF':'PHOTO_REF') : (currentLang==='tr'?'RASTGELE':'RANDOM');
        const modeEl = document.getElementById('hv-mode');
        modeEl.innerText = modeText;
        modeEl.style.color = currentMode === 'ref' ? '#eab308' : '#f43f5e';
        
        // Inputs
        const fields = ['expr', 'outfit', 'obj', 'bg', 'txt', 'light'];
        fields.forEach(f => {
            const val = document.getElementById(`inp-${f}`).value;
            const displayVal = val ? (val.length > 18 ? val.substring(0,16)+".." : val) : "N/A";
            const el = document.getElementById(`hv-${f}`);
            if(el) {
                el.innerText = displayVal;
                if(f !== 'txt') el.style.color = val ? 'white' : 'var(--text-muted)';
            }
        });
    }

    function generate() {
        // Basic
        const expr = document.getElementById('inp-expr').value || "excited expression";
        const outfit = document.getElementById('inp-outfit').value || "casual clothes";
        const obj = document.getElementById('inp-obj').value || "looking at camera";
        const bg = document.getElementById('inp-bg').value || "cinematic background";
        const txt = document.getElementById('inp-txt').value || "VIDEO";
        
        // Advanced
        const light = document.getElementById('inp-light').value || "dramatic cinematic lighting";
        const angle = document.getElementById('inp-angle').value || "eye-level shot";
        const fx = document.getElementById('inp-fx').value || "sharp focus";

        let subject = "";
        if (currentMode === 'rnd') {
            subject = "a charismatic young male content creator";
        } else {
            subject = "the content creator"; 
        }

        const prompt = `A hyper-realistic, high-ctr YouTube thumbnail featuring ${subject} with an expression of ${expr}, making direct eye contact. He is wearing ${outfit}. Positioned on the right side of the frame (rule of thirds). In the foreground/hands, he is interacting with ${obj}. The background is a ${bg}. The scene is illuminated by ${light}. Camera angle is ${angle}. Visual effects: ${fx}. On the left side, large, bold, 3D typography with a glossy metallic texture and sharp white outline reads "${txt}". Shot with Sony A7S III, f/1.8 aperture, highly detailed, photorealistic, 8k, ray tracing, global illumination, --ar ${currentAr} --v 6.0`;

        const output = document.getElementById('output');
        output.value = prompt;
        output.scrollIntoView({behavior: "smooth", block: "center"});
        
        addToHistory(prompt);
    }

    function copyResult() {
        const txt = document.getElementById('output');
        if(!txt.value) return;
        txt.select();
        txt.setSelectionRange(0, 99999);
        navigator.clipboard.writeText(txt.value);
        
        const btn = document.querySelector('.copy-btn');
        const oldHTML = btn.innerHTML;
        btn.innerHTML = "<i>‚úÖ</i> KOPYALANDI!";
        btn.style.background = "#22c55e";
        btn.style.borderColor = "#22c55e";
        setTimeout(() => {
            btn.innerHTML = oldHTML;
            btn.style.background = "rgba(51, 65, 85, 0.8)";
             btn.style.borderColor = "var(--glass-border)";
        }, 2000);
    }

    // --- HISTORY FUNCTIONS ---
    function loadHistory() {
        const stored = localStorage.getItem('ts_history');
        if(stored) {
            promptHistory = JSON.parse(stored);
            renderHistory();
        }
    }

    function addToHistory(prompt) {
        // Add to beginning
        promptHistory.unshift(prompt);
        // Keep max 20 items
        if(promptHistory.length > 20) promptHistory.pop();
        
        localStorage.setItem('ts_history', JSON.stringify(promptHistory));
        renderHistory();
    }

    function deleteHistory(index) {
        promptHistory.splice(index, 1);
        localStorage.setItem('ts_history', JSON.stringify(promptHistory));
        renderHistory();
    }

    function clearHistory() {
        if(confirm(currentLang === 'tr' ? 'T√ºm ge√ßmi≈ü silinsin mi?' : 'Clear all history?')) {
            promptHistory = [];
            localStorage.setItem('ts_history', JSON.stringify(promptHistory));
            renderHistory();
        }
    }

    function renderHistory() {
        const list = document.getElementById('history-list');
        list.innerHTML = '';
        
        promptHistory.forEach((item, index) => {
            const el = document.createElement('div');
            el.className = 'history-item';
            
            const txtDiv = document.createElement('div');
            txtDiv.className = 'hist-text';
            txtDiv.innerText = item;
            
            const actionDiv = document.createElement('div');
            actionDiv.className = 'hist-actions';
            
            const btnCopy = document.createElement('button');
            btnCopy.className = 'h-btn';
            btnCopy.innerText = 'COPY';
            btnCopy.onclick = () => {
                 navigator.clipboard.writeText(item);
                 btnCopy.innerText = 'OK';
                 setTimeout(()=> btnCopy.innerText = 'COPY', 1000);
            };

            const btnDel = document.createElement('button');
            btnDel.className = 'h-btn h-del';
            btnDel.innerText = 'X';
            btnDel.onclick = () => deleteHistory(index);
            
            actionDiv.appendChild(btnCopy);
            actionDiv.appendChild(btnDel);
            
            el.appendChild(txtDiv);
            el.appendChild(actionDiv);
            list.appendChild(el);
        });
    }

    // Start the engine
    init();

</script>

</body>
</html>